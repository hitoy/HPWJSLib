/*
 * Carousel.js 2.0.1
 * Copyright Hito (vip@hitoy.org) All rights reserved
 */
!function(w){'use strict';var version='2.0.1';function Carousel(carouselscroll,duration,delay,loop,step,direction,mousewheel,indicator,nextbutton,previousbutton,carouselscrollactiveclass,activeclass){var autoplayid;var in_transition=false;var firstslideroffset;var slidernum;var slidernuminview;var step=step;var currentindex=0;var carouselwrap;var carouselthreshold=0;function getSliderDistance(index){var carousel=carouselscroll.children;if(index>carousel.length||index<0)return false;var slider=carousel[index];var rect=slider.getBoundingClientRect();var wraprect=carouselwrap.getBoundingClientRect();if(direction=='x'){return rect.left-wraprect.left;}else{return rect.top-wraprect.top;}}
function getSliderNumberinView(){var count=0;var distance=direction=='x'?carouselscroll.getBoundingClientRect().width:carouselscroll.getBoundingClientRect().height;for(var i in Array.from(carouselscroll.children)){var slider=carouselscroll.children[i];var sliderdistance=direction=='x'?slider.getBoundingClientRect().width:slider.getBoundingClientRect().height;var offset=getSliderDistance(i);if(offset>=0&&offset+sliderdistance<=distance){count++;}else if(offset>=distance){break;}}
return count;}
function activateIndicator(index){var indicators=indicator.querySelectorAll('span');if(loop){index=index-step;}
indicator.querySelectorAll('span').forEach(function(c,i){if(i>=index&&i<index+step){c.classList.add(activeclass);}else{c.classList.remove(activeclass);}});}
function enablePageButton(button){if(nextbutton&&button==nextbutton){nextbutton.setAttribute('aria-disabled','false');}
else if(previousbutton&&button==previousbutton){previousbutton.setAttribute('aria-disabled','false');}}
function disablePageButton(button){if(nextbutton&&button==nextbutton){nextbutton.setAttribute('aria-disabled','true');}
else if(previousbutton&&button==previousbutton){previousbutton.setAttribute('aria-disabled','true');}}
function move(index,duration){if(index<0||index>=carouselscroll.children.length)return false;var offset=getSliderDistance(index);var transdis=parseFloat(carouselscroll.getAttribute('data-translate'))-offset;carouselscroll.style.transitionDuration=parseFloat(duration/1000)+'s';carouselscroll.style.transitionDelay='0s';if(direction==='x'){carouselscroll.style.transform='translateX('+transdis+'px)';}else{carouselscroll.style.transform='translateY('+transdis+'px)';}
carouselscroll.setAttribute('data-translate',transdis);setTimeout(function(){currentindex=index;},duration);}
function slide(index){if(in_transition)return false;in_transition=true;if(index>=carouselscroll.children.length){index=0;}else if(index<0){index=carouselscroll.children.length-1;}
move(index,duration);setTimeout(function(){if(loop){if(index<step){index=index+slidernum;move(index,0);}
else if(index>=slidernum+step){index=index-slidernum;move(index,0);}}
var order=1;carouselscroll.childNodes.forEach(function(c,i){if(i>=index&&i<index+slidernuminview){c.classList.add(carouselscrollactiveclass);c.setAttribute('data-visible-index',order);order++;}else{c.classList.remove(carouselscrollactiveclass);c.removeAttribute('data-visible-index');}});if(indicator)activateIndicator(index);if(!loop&&currentindex>=slidernum-slidernuminview){disablePageButton(nextbutton);}
else if(!loop&&currentindex==0){disablePageButton(previousbutton);}
else if(!loop){enablePageButton(nextbutton);enablePageButton(previousbutton);}
in_transition=false;},duration);}
function attachDragHandle(){var initpageX=0;var initpageY=0;var pageX=0;var pageY=0;carouselscroll.addEventListener('touchstart',function(ev){initpageX=ev.targetTouches[0].pageX;initpageY=ev.targetTouches[0].pageY;pageX=initpageX;pageY=initpageY;},{passive:true});carouselscroll.addEventListener('touchmove',function(ev){var x=ev.targetTouches[0].pageX;var y=ev.targetTouches[0].pageY;var translate=parseFloat(carouselscroll.getAttribute('data-translate'));carouselscroll.style.transitionDuration='0s';carouselscroll.style.transitionDelay='0s';if(direction=='x'){var movedis=x-pageX;var transdis=translate+movedis;carouselscroll.style.transform='translateX('+transdis+'px)';carouselscroll.setAttribute('data-translate',transdis);}else{var movedis=y-pageY;var transdis=translate+movedis;carouselscroll.style.transform='translateY('+transdis+'px)';carouselscroll.setAttribute('data-translate',transdis);}
pageX=x;pageY=y;},{passive:true});carouselscroll.addEventListener('touchend',function(ev){var x=ev.changedTouches[0].pageX;var y=ev.changedTouches[0].pageY;var basedis=getSliderDistance(step)-getSliderDistance(0);if(direction=='x'){var movedis=x-initpageX;}else{var movedis=y-initpageY;}
if(!loop&&currentindex==0&&movedis>=0){slide(0);}else if(!loop&&currentindex==slidernum-step&&movedis<=0){slide(slidernum-step);}
else if(movedis<-basedis/3){slide(currentindex+step);}else if(movedis>basedis/3){slide(currentindex-step);}else{slide(currentindex);}},{passive:true});}
function attachWheelHandle(){if(mousewheel){carouselwrap.addEventListener('wheel',function(ev){if(ev.deltaY>0){if(!loop&&currentindex==slidernum-step||carouselthreshold<0.75)return false;slide(currentindex+step);}else if(ev.deltaY<0){if(!loop&&currentindex==0||carouselthreshold<0.75)return false;slide(currentindex-step);}
ev.preventDefault();},{passive:false});}}
function __init(){disablePageButton(nextbutton);disablePageButton(previousbutton);carouselscroll.childNodes.forEach(node=>{if(node.nodeType!==1){carouselscroll.removeChild(node);}});var carouselscrollrect=carouselscroll.getBoundingClientRect();var carouselscrollstyle=w.getComputedStyle(carouselscroll);carouselwrap=document.createElement('div');carouselwrap.style.width=carouselscrollrect.width+'px';carouselwrap.style.height=carouselscrollrect.height+'px';carouselwrap.className='carousel-wrap';carouselwrap.setAttribute('carousel-wrap','');carouselwrap.style.margin=carouselscrollstyle.getPropertyValue('margin');carouselscroll.style.margin=0;carouselscroll.parentNode.insertBefore(carouselwrap,carouselscroll);carouselwrap.appendChild(carouselscroll);firstslideroffset=getSliderDistance(0);slidernum=carouselscroll.children.length;slidernuminview=getSliderNumberinView();if(slidernum==0||slidernum==slidernuminview){return false;}
if(step==='auto'){step=slidernuminview;}else{step=Math.min(step,slidernuminview);}
enablePageButton(nextbutton);carouselscroll.setAttribute('data-translate',0);if(loop){var origin_sliders=carouselscroll.children;for(var i=0;i<slidernuminview;i++){var clone=origin_sliders[i].cloneNode(true);carouselscroll.appendChild(clone);}
for(var i=slidernum-1;i>=slidernum-step;i--){var slider=origin_sliders[i];var clone=slider.cloneNode(true);carouselscroll.insertBefore(clone,carouselscroll.children[0]);}
var positionoffset=getSliderDistance(step)-firstslideroffset;if(direction==='x'){carouselscroll.style.left=-positionoffset+'px';}else{carouselscroll.style.top=-positionoffset+'px';}
currentindex=step;enablePageButton(previousbutton);}
else{disablePageButton(previousbutton);}
var start=loop?step:0;var end=loop?slidernuminview+step:slidernuminview;var index=1;carouselscroll.childNodes.forEach(function(node,i){var rect=node.getBoundingClientRect();node.style.width=rect.width+'px';node.style.height=rect.height+'px';if(i>=start&&i<end){node.classList.add(carouselscrollactiveclass);node.setAttribute('data-visible-index',index);index++;}});var lastsliderrect=carouselscroll.lastElementChild.getBoundingClientRect();var carouselscrollrect=carouselscroll.getBoundingClientRect();if(direction==='x'){carouselscroll.style.width=lastsliderrect.right-carouselscrollrect.left+'px';carouselscroll.style.height=carouselscrollrect.height+'px';}else{carouselscroll.style.width=carouselscrollrect.width+'px';carouselscroll.style.height=lastsliderrect.bottom-carouselscrollrect.top+'px';}
if(indicator){indicator.innerHTML='<span></span>'.repeat(slidernum);activateIndicator(currentindex);indicator.addEventListener('click',function(e){var target=e.target||w.event.srcElement;if(target.closest('span')){var index=(Array.from(indicator.children).indexOf(target.closest('span')));if(loop){index=index+step;}
slide(index);}});}
if(nextbutton){nextbutton.addEventListener('click',function(e){if(nextbutton.getAttribute('aria-disabled')=='true')return false;slide(currentindex+step);});}
if(previousbutton){previousbutton.addEventListener('click',function(e){if(previousbutton.getAttribute('aria-disabled')=='true')return false;slide(currentindex-step);});}
attachDragHandle();attachWheelHandle();};__init();this.play=function(){if(slidernum==0||slidernum==slidernuminview)return false;autoplayid=setInterval(function(){slide(currentindex+step);},delay);['mouseenter','touchstart'].forEach(function(ev){carouselwrap.parentNode.addEventListener(ev,function(){clearInterval(autoplayid);});});['mouseleave','touchend'].forEach(function(ev){carouselwrap.parentNode.addEventListener(ev,function(){autoplayid=setInterval(function(){slide(currentindex+step);},delay);});});}
this.setThreshold=function(threshold){carouselthreshold=threshold;}
this.carouselwrap=carouselwrap;this.carouselwrap.guid=Math.random().toString(36).substr(2);}
function carouselParser(){var carousels={};if(w.IntersectionObserver){var carouselwrapobserver=new IntersectionObserver(function(entries){entries.forEach(function(entry){var id=entry.target.guid;var carousel=carousels[id];carousel.setThreshold(entry.intersectionRatio);});},{rootMargin:'0px',threshold:[0,0.25,0.5,0.75,1]});}
var items=w.document.querySelectorAll('[carousel-container]');items.forEach(function(el){var loop=el.hasAttribute('carousel-loop');var autoplay=el.hasAttribute('carousel-autoplay');var delay=el.hasAttribute('carousel-delay')?parseInt(el.getAttribute('carousel-delay')):6000;var duration=el.hasAttribute('carousel-duration')?parseInt(el.getAttribute('carousel-duration')):600;var step=el.hasAttribute('carousel-step')?parseInt(el.getAttribute('carousel-step')):'auto';var direction=el.hasAttribute('carousel-direction')?['x','y'].indexOf(el.getAttribute('carousel-direction'))==-1?'x':el.getAttribute('carousel-direction'):'x';var mousewheel=el.hasAttribute('carousel-mousewheel');var carouselscroll=el.querySelector('[carousel-scroll]');if(!carouselscroll)return;var carouselscrollactiveclass=carouselscroll.getAttribute('carousel-slider-activeclass')||'carousel-visible-slider';el.classList.add('carousel-container');carouselscroll.classList.add('carousel-scroll');if(direction==='x'){carouselscroll.classList.add('carousel-scroll-x');}else{carouselscroll.classList.add('carousel-scroll-y');}
var indicator=el.querySelector('[carousel-indicator]')
var activeclass=indicator?indicator.getAttribute('carousel-indicator-activeclass')||'carousel-active-indicator':'carousel-active-indicator';var nextbutton=el.querySelector('[carousel-next-button]');if(nextbutton){nextbutton.setAttribute('role','button');nextbutton.setAttribute('tabindex','0');}
var previousbutton=el.querySelector('[carousel-prev-button]');if(previousbutton){previousbutton.setAttribute('role','button');previousbutton.setAttribute('tabindex','0');}
var carousel=new Carousel(carouselscroll,duration,delay,loop,step,direction,mousewheel,indicator,nextbutton,previousbutton,carouselscrollactiveclass,activeclass);if(autoplay)carousel.play();if(carouselwrapobserver&&carousel.carouselwrap){carouselwrapobserver.observe(carousel.carouselwrap);carousels[carousel.carouselwrap.guid]=carousel;}});}
function attachGlobaStyles(){var nestedstyle=w.document.createElement('style');nestedstyle.setAttribute('carousel-extension',version);nestedstyle.innerHTML=`
        [carousel-container] {
            position: relative;
        }
        [carousel-wrap] {
            position: relative;
            max-width: 100%;
            max-height: 100%;
            overflow: hidden;
        }
        [carousel-scroll] {
            position: absolute;
            display: block;
            width: 100%;
            height: auto;
            transition-property: transform;
            transition-timing-function: ease-in-out;
            will-change: transform;
            backface-visibility: hidden;
        }
        [carousel-scroll] > * {
            box-sizing: border-box;
            backface-visibility: hidden;
        }
        [carousel-scroll].carousel-scroll-x {
            white-space:nowrap;
        }
        [carousel-scroll].carousel-scroll-x > * {
            display: inline-block;
            vertical-align: top;
            white-space: initial;
        }
        [carousel-scroll].carousel-scroll-y > * {
            display: block;
        }
        [carousel-prev-button][aria-disabled = true],[carousel-next-button][aria-disabled = true] {
            visibility: hidden;
        }`;w.document.head.append(nestedstyle);}
var readyState=w.document.readyState;if(readyState==="complete"){attachGlobaStyles();carouselParser();}else{w.addEventListener("load",function(){attachGlobaStyles();carouselParser();});}}(window);
